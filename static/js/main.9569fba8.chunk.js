(this["webpackJsonptodolist-ts"]=this["webpackJsonptodolist-ts"]||[]).push([[0],{109:function(t,e,n){},139:function(t,e,n){},141:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n(26),i=n.n(c);n(109),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o,r,s,d=n(47),l=n(50),u=n(89),j=n(95),O=n(15),b=n(4),f=n(13),h=n(90),T=n.n(h).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"api-key":"219ce503-db19-4440-86cc-f93419479856"}}),m=function(){return T.get("todo-lists")},p=function(t){return T.post("todo-lists",{title:t})},S=function(t){return T.delete("todo-lists/".concat(t))},I=function(t){return T.put("todo-lists/".concat(t.todolistId),{title:t.title})},v=function(t){return T.get("todo-lists/".concat(t,"/tasks"))},y=function(t){return T.post("todo-lists/".concat(t.todolistId,"/tasks"),{title:t.taskTitle})},x=function(t){return T.delete("todo-lists/".concat(t.todolistId,"/tasks/").concat(t.taskId))},g=function(t,e){return T.put("todo-lists/".concat(t.todolistId,"/tasks/").concat(t.taskId),Object(f.a)({},e))};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(o||(o={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(r||(r={})),function(t){t[t.successfully=0]="successfully",t[t.error=1]="error",t[t.captcha_required=10]="captcha_required"}(s||(s={}));var k={colorTheme:"dark",status:"idle",error:null},E=function(t){return{type:"APP/SET-STATUS",status:t}},C=function(t){return{type:"APP/SET-ERROR",error:t}},A=function(t,e){e(E("failed")),e(C(t.message?t.message:"Some error occurred"))},D=function(t,e){t.messages.length?e(C(t.messages[0])):e(C("Some error occurred")),e(E("failed"))},w={},L=function(t,e,n){return{type:"CHANGE-TASK-ENTITY-STATUS",todolistId:t,taskId:e,status:n}},N=function(t,e,n){return function(a,c){a(E("loading")),a(L(t,e,"loading"));var i=c().tasks[t].find((function(t){return t.id===e}));i&&g({todolistId:t,taskId:e},Object(f.a)({title:i.title,description:i.description,status:i.status,priority:i.priority,startDate:i.startDate,deadline:i.deadline},n)).then((function(n){n.data.resultCode===s.successfully?(a(function(t,e,n){return{type:"UPDATE-TASK",todolistId:t,taskId:e,task:n}}(t,e,n.data.data.item)),a(L(t,e,"succeeded")),a(E("succeeded"))):(D(n.data,a),a(L(t,e,"failed")))})).catch((function(t){A(t,a)}))}},R=[],P=function(t,e){return{type:"CHANGE-TODOLIST-ENTITY-STATUS",todolistId:t,entityStatus:e}},H=n(91),K=Object(l.b)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TASK":return Object(f.a)(Object(f.a)({},t),{},Object(b.a)({},e.todolistId,t[e.todolistId].filter((function(t){return t.id!==e.taskId}))));case"ADD-TASK":return Object(f.a)(Object(f.a)({},t),{},Object(b.a)({},e.todolistId,[Object(f.a)(Object(f.a)({},e.task),{},{entityStatus:"idle"})].concat(Object(O.a)(t[e.todolistId]))));case"ADD-TODOLIST":return Object(f.a)(Object(f.a)({},t),{},Object(b.a)({},e.todolist.id,[]));case"REMOVE-TODOLIST":var n=Object(f.a)({},t),a=e.id,c=(n[a],Object(u.a)(n,[a].map(j.a)));return c;case"SET-TODOLISTS":var i=Object(f.a)({},t);return e.todolists.forEach((function(t){return i[t.id]=[]})),i;case"SET-TASKS":return Object(f.a)(Object(f.a)({},t),{},Object(b.a)({},e.todolistId,Object(O.a)(e.tasks).map((function(t){return Object(f.a)(Object(f.a)({},t),{},{entityStatus:"idle"})}))));case"UPDATE-TASK":return Object(f.a)(Object(f.a)({},t),{},Object(b.a)({},e.todolistId,t[e.todolistId].map((function(t){return t.id===e.taskId?Object(f.a)(Object(f.a)({},e.task),{},{entityStatus:"idle"}):t}))));case"CHANGE-TASK-ENTITY-STATUS":return Object(f.a)(Object(f.a)({},t),{},Object(b.a)({},e.todolistId,t[e.todolistId].map((function(t){return t.id===e.taskId?Object(f.a)(Object(f.a)({},t),{},{entityStatus:e.status}):t}))));default:return t}},todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TODOLIST":return t.filter((function(t){return t.id!==e.id}));case"ADD-TODOLIST":return[Object(f.a)(Object(f.a)({},e.todolist),{},{filter:"all",entityStatus:"idle"})].concat(Object(O.a)(t));case"CHANGE-TODOLIST-TITLE":return t.map((function(t){return t.id===e.todolistId?Object(f.a)(Object(f.a)({},t),{},{title:e.title}):t}));case"CHANGE-TODOLIST-FILTER":return t.map((function(t){return t.id===e.todolistId?Object(f.a)(Object(f.a)({},t),{},{filter:e.filter}):t}));case"SET-TODOLISTS":return e.todolists.map((function(t){return Object(f.a)(Object(f.a)({},t),{},{filter:"all",entityStatus:"idle"})}));case"CHANGE-TODOLIST-ENTITY-STATUS":return t.map((function(t){return t.id===e.todolistId?Object(f.a)(Object(f.a)({},t),{},{entityStatus:e.entityStatus}):t}));default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"APP/CHANGE-COLOR-THEME":return Object(f.a)(Object(f.a)({},t),{},{colorTheme:"light"===e.colorTheme?"dark":"light"});case"APP/SET-STATUS":return Object(f.a)(Object(f.a)({},t),{},{status:e.status});case"APP/SET-ERROR":return Object(f.a)(Object(f.a)({},t),{},{error:e.error});default:return t}}}),U=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.c,G=Object(l.d)(K,U(Object(l.a)(H.a)));window.store=G;n(139);var M=d.c,_=d.b,z=n(14),V=n(195),F=n(208),Y=n(188),q=n(2),B=Object(a.memo)((function(t){var e=t.addItem,n=t.disabled;console.log("AddItemForm called");var c=Object(a.useState)(""),i=Object(z.a)(c,2),o=i[0],r=i[1],s=Object(a.useState)(null),d=Object(z.a)(s,2),l=d[0],u=d[1],j=function(){if(""===o.trim())return u("Title is required"),void r("");e(o.trim()),r("")};return Object(q.jsxs)("div",{children:[Object(q.jsx)(V.a,{variant:"outlined",size:"small",label:"Title",value:o,onChange:function(t){r(t.currentTarget.value),l&&u("")},onKeyDown:function(t){"Enter"===t.key&&j()},error:!!l,helperText:l,disabled:n}),Object(q.jsx)(F.a,{onClick:j,color:"primary",disabled:n,children:Object(q.jsx)(Y.a,{})})]})})),J=Object(a.memo)((function(t){console.log("EditableSpan called");var e=Object(a.useState)(!1),n=Object(z.a)(e,2),c=n[0],i=n[1],o=Object(a.useState)(t.value),r=Object(z.a)(o,2),s=r[0],d=r[1],l=function(){i(!1),""!==s.trim()&&t.onChange(s)};return c&&!t.disabled?Object(q.jsx)(V.a,{value:s,onChange:function(t){d(t.currentTarget.value)},onBlur:l,onKeyDown:function(t){"Enter"===t.key&&l()},autoFocus:!0}):Object(q.jsx)("span",{onDoubleClick:function(){i(!0)},children:t.value})})),W=n(199),X=n(197),$=n(189),Q=Object(a.memo)((function(t){var e=t.task,n=t.todolistId,c=t.disabled,i=_(),r="loading"===e.entityStatus,d=Object(a.useCallback)((function(t){i(N(n,e.id,{title:t}))}),[i,n,e.id]);return Object(q.jsxs)(W.a,{disableGutters:!0,divider:!0,className:e.status===o.Completed?"task isDone":"task",children:[Object(q.jsx)(X.a,{checked:e.status===o.Completed,onChange:function(t){var a=t.currentTarget.checked?o.Completed:o.New;i(N(n,e.id,{status:a}))},color:"primary",size:"small",disabled:r}),Object(q.jsx)(F.a,{onClick:function(){i(function(t,e){return function(n){n(E("loading")),n(L(t,e,"loading")),x({todolistId:t,taskId:e}).then((function(a){a.data.resultCode===s.successfully?(n(function(t,e){return{type:"REMOVE-TASK",todolistId:t,taskId:e}}(t,e)),n(E("succeeded"))):D(a.data,n)})).catch((function(t){A(t,n)}))}}(n,e.id))},color:"secondary",size:"small",disabled:r,children:Object(q.jsx)($.a,{fontSize:"small"})}),Object(q.jsx)(J,{value:e.title,onChange:d,disabled:c||r})]})})),Z=n(207),tt=n(202),et=Object(a.memo)((function(t){var e=t.todolist,n=t.demo,c=void 0!==n&&n;console.log("Todolist called");var i=M((function(t){return t.tasks[e.id]})),r=_(),d="loading"===e.entityStatus;switch(e.filter){case"active":i=i.filter((function(t){return t.status===o.New}));break;case"completed":i=i.filter((function(t){return t.status===o.Completed}))}var l=Object(a.useCallback)((function(t){return function(){return r({type:"CHANGE-TODOLIST-FILTER",todolistId:e.id,filter:t})}}),[r,e.id]),u=Object(a.useCallback)((function(t){r(function(t,e){return function(n){n(E("loading")),y({todolistId:t,taskTitle:e}).then((function(e){e.data.resultCode===s.successfully?(n(function(t,e){return{type:"ADD-TASK",todolistId:t,task:e}}(t,e.data.data.item)),n(E("succeeded"))):D(e.data,n)})).catch((function(t){A(t,n)}))}}(e.id,t))}),[r,e.id]),j=Object(a.useCallback)((function(t){var n,a;r((n=e.id,a=t,function(t){t(E("loading")),t(P(n,"loading")),I({todolistId:n,title:a}).then((function(e){e.data.resultCode===s.successfully?(t(function(t,e){return{type:"CHANGE-TODOLIST-TITLE",todolistId:t,title:e}}(n,a)),t(E("succeeded")),t(P(n,"idle"))):(D(e.data,t),t(P(n,"failed")))})).catch((function(e){A(e,t)}))}))}),[r,e.id]),O=i&&i.length?i.map((function(t){return Object(q.jsx)(Q,{task:t,todolistId:e.id,disabled:d},t.id)})):Object(q.jsx)("span",{children:"No tasks in this list"});return Object(a.useEffect)((function(){var t;c||r((t=e.id,function(e){e(E("loading")),v(t).then((function(n){e(function(t,e){return{type:"SET-TASKS",todolistId:t,tasks:e}}(t,n.data.items)),e(E("succeeded"))})).catch((function(t){A(t,e)}))}))}),[r,e.id,c]),Object(q.jsxs)("div",{children:[Object(q.jsxs)("h3",{children:[Object(q.jsx)(J,{value:e.title,onChange:j,disabled:d}),Object(q.jsx)(F.a,{onClick:function(){var t;r((t=e.id,function(e){e(E("loading")),e(P(t,"loading")),S(t).then((function(n){n.data.resultCode===s.successfully?(e(function(t){return{type:"REMOVE-TODOLIST",id:t}}(t)),e(E("succeeded"))):D(n.data,e)})).catch((function(t){A(t,e)}))}))},color:"secondary",disabled:d,children:Object(q.jsx)($.a,{})})]}),Object(q.jsx)(B,{addItem:u,disabled:d}),Object(q.jsx)(Z.a,{children:O}),Object(q.jsxs)("div",{children:[Object(q.jsx)(tt.a,{size:"small",variant:"contained",color:"all"===e.filter?"secondary":"primary",onClick:l("all"),children:"All"}),Object(q.jsx)(tt.a,{size:"small",variant:"contained",color:"active"===e.filter?"secondary":"primary",onClick:l("active"),children:"Active"}),Object(q.jsx)(tt.a,{size:"small",variant:"contained",color:"completed"===e.filter?"secondary":"primary",onClick:l("completed"),children:"Completed"})]})]})})),nt=n(203),at=n(206),ct=function(t){var e=t.demo,n=void 0!==e&&e,c=M((function(t){return t.todolists})),i=_();Object(a.useEffect)((function(){n||i((function(t){t(E("loading")),m().then((function(e){t({type:"SET-TODOLISTS",todolists:e.data}),t(E("succeeded"))})).catch((function(e){A(e,t)}))}))}),[i,n]);var o=Object(a.useCallback)((function(t){var e;i((e=t,function(t){t(E("loading")),p(e).then((function(e){e.data.resultCode===s.successfully?(t({type:"ADD-TODOLIST",todolist:e.data.data.item}),t(E("succeeded"))):D(e.data,t)})).catch((function(e){A(e,t)}))}))}),[i]),r=c.map((function(t){return Object(q.jsx)(nt.a,{item:!0,children:Object(q.jsx)(at.a,{elevation:3,style:{padding:"20px"},children:Object(q.jsx)(et,{todolist:t,demo:n},t.id)})},t.id)}));return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(nt.a,{container:!0,style:{padding:"20px 0 20px 20px"},children:Object(q.jsx)(B,{addItem:o})}),Object(q.jsx)(nt.a,{container:!0,spacing:3,children:r})]})},it=n(94),ot=n(205),rt=n(191),st=n(209),dt=n(210),lt=n(211),ut=n(212),jt=n(204),Ot=n(192),bt=n(193),ft=n(194),ht=n(200),Tt=n(198),mt=a.forwardRef((function(t,e){return Object(q.jsx)(Tt.a,Object(f.a)({elevation:6,ref:e,variant:"filled"},t))})),pt=function(){var t=M((function(t){return t.app.error})),e=_(),n=function(t,n){"clickaway"!==n&&e(C(null))};return Object(q.jsx)(ht.a,{open:!!t,autoHideDuration:3e3,onClose:n,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:Object(q.jsx)(mt,{onClose:n,severity:"error",sx:{width:"100%"},children:t})})};var St=function(t){var e=t.demo,n=void 0!==e&&e,a=_(),c=M((function(t){return t.app})),i=Object(it.a)({palette:{mode:c.colorTheme,primary:{main:"#27a1c6"},secondary:{main:"#ffde7d"}}});return Object(q.jsxs)("div",{children:[Object(q.jsx)(pt,{}),Object(q.jsxs)(ot.a,{theme:i,children:[Object(q.jsx)(rt.a,{}),Object(q.jsxs)(st.a,{position:"static",children:[Object(q.jsxs)(dt.a,{style:{justifyContent:"space-between"},children:[Object(q.jsx)(F.a,{edge:"start",color:"inherit","aria-label":"menu",children:Object(q.jsx)(Ot.a,{})}),Object(q.jsx)(lt.a,{variant:"h6",children:"Todolists"}),Object(q.jsxs)("div",{children:[Object(q.jsx)(F.a,{onClick:function(){return a({type:"APP/CHANGE-COLOR-THEME",colorTheme:c.colorTheme})},children:"dark"===c.colorTheme?Object(q.jsx)(bt.a,{}):Object(q.jsx)(ft.a,{})}),Object(q.jsx)(tt.a,{color:"inherit",variant:"outlined",children:"Login"})]})]}),"loading"===c.status&&Object(q.jsx)(ut.a,{})]}),Object(q.jsx)(jt.a,{fixed:!0,children:Object(q.jsx)(ct,{demo:n})})]})]})};i.a.render(Object(q.jsx)(d.a,{store:G,children:Object(q.jsx)(St,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[141,1,2]]]);
//# sourceMappingURL=main.9569fba8.chunk.js.map
(this["webpackJsonptodolist-ts"]=this["webpackJsonptodolist-ts"]||[]).push([[0],{128:function(t,e,n){},157:function(t,e,n){},159:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n(31),i=n.n(c);n(128),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o,r,s,d=n(57),l=n(60),u=n(103),O=n(112),j=n(16),b=n(5),f=n(13),T=n(104),h=n.n(T).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"api-key":"a3decdb3-48b2-455e-b07a-b72b7d94ecdb"}}),S=function(t){return h.post("/auth/login",t)},m=function(){return h.get("auth/me")},I=function(){return h.delete("/auth/login")},p=function(){return h.get("todo-lists")},x=function(t){return h.post("todo-lists",{title:t})},g=function(t){return h.delete("todo-lists/".concat(t))},v=function(t){return h.put("todo-lists/".concat(t.todolistId),{title:t.title})},y=function(t){return h.get("todo-lists/".concat(t,"/tasks"))},E=function(t){return h.post("todo-lists/".concat(t.todolistId,"/tasks"),{title:t.taskTitle})},A=function(t){return h.delete("todo-lists/".concat(t.todolistId,"/tasks/").concat(t.taskId))},D=function(t,e){return h.put("todo-lists/".concat(t.todolistId,"/tasks/").concat(t.taskId),e)};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(o||(o={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(r||(r={})),function(t){t[t.successfully=0]="successfully",t[t.error=1]="error",t[t.captcha_required=10]="captcha_required"}(s||(s={}));var k=function(t,e){e(R("failed")),e(G(t.message?t.message:"Some error occurred"))},L=function(t,e){t.messages.length?e(G(t.messages[0])):e(G("Some error occurred")),e(R("failed"))},C=[],w=function(t,e){return{type:"TODOLISTS/CHANGE-TODOLIST-ENTITY-STATUS",todolistId:t,entityStatus:e}},P={isLoggedIn:!1},N=function(t){return{type:"LOGIN/SET-IS-LOGGED-IN",value:t}},K={colorTheme:"dark",status:"idle",error:null,isInitialized:!1},R=function(t){return{type:"APP/SET-STATUS",status:t}},G=function(t){return{type:"APP/SET-ERROR",error:t}},H={},M=function(t,e,n){return{type:"TASKS/CHANGE-TASK-ENTITY-STATUS",todolistId:t,taskId:e,status:n}},U=function(t){return function(e){e(R("loading")),y(t).then((function(n){e(function(t,e){return{type:"TASKS/SET-TASKS",todolistId:t,tasks:e}}(t,n.data.items)),e(R("succeeded"))})).catch((function(t){k(t,e)}))}},z=function(t,e,n){return function(a,c){a(R("loading")),a(M(t,e,"loading"));var i=c().tasks[t].find((function(t){return t.id===e}));i&&D({todolistId:t,taskId:e},Object(f.a)({title:i.title,description:i.description,status:i.status,priority:i.priority,startDate:i.startDate,deadline:i.deadline},n)).then((function(n){n.data.resultCode===s.successfully?(a(function(t,e,n){return{type:"TASKS/UPDATE-TASK",todolistId:t,taskId:e,task:n}}(t,e,n.data.data.item)),a(M(t,e,"succeeded")),a(R("succeeded"))):(L(n.data,a),a(M(t,e,"failed")))})).catch((function(t){k(t,a)}))}},_=n(105),F=Object(l.b)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"TASKS/REMOVE-TASK":return Object(f.a)(Object(f.a)({},t),{},Object(b.a)({},e.todolistId,t[e.todolistId].filter((function(t){return t.id!==e.taskId}))));case"TASKS/ADD-TASK":return Object(f.a)(Object(f.a)({},t),{},Object(b.a)({},e.todolistId,[Object(f.a)(Object(f.a)({},e.task),{},{entityStatus:"idle"})].concat(Object(j.a)(t[e.todolistId]))));case"TODOLISTS/ADD-TODOLIST":return Object(f.a)(Object(f.a)({},t),{},Object(b.a)({},e.todolist.id,[]));case"TODOLISTS/REMOVE-TODOLIST":var n=Object(f.a)({},t),a=e.id,c=(n[a],Object(u.a)(n,[a].map(O.a)));return c;case"TODOLISTS/SET-TODOLISTS":var i=Object(f.a)({},t);return e.todolists.forEach((function(t){return i[t.id]=[]})),i;case"TASKS/SET-TASKS":return Object(f.a)(Object(f.a)({},t),{},Object(b.a)({},e.todolistId,Object(j.a)(e.tasks).map((function(t){return Object(f.a)(Object(f.a)({},t),{},{entityStatus:"idle"})}))));case"TASKS/UPDATE-TASK":return Object(f.a)(Object(f.a)({},t),{},Object(b.a)({},e.todolistId,t[e.todolistId].map((function(t){return t.id===e.taskId?Object(f.a)(Object(f.a)({},e.task),{},{entityStatus:"idle"}):t}))));case"TASKS/CHANGE-TASK-ENTITY-STATUS":return Object(f.a)(Object(f.a)({},t),{},Object(b.a)({},e.todolistId,t[e.todolistId].map((function(t){return t.id===e.taskId?Object(f.a)(Object(f.a)({},t),{},{entityStatus:e.status}):t}))));case"TODOLISTS/WIPE-TODOLISTS-DATA":return{};default:return t}},todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"TODOLISTS/REMOVE-TODOLIST":return t.filter((function(t){return t.id!==e.id}));case"TODOLISTS/ADD-TODOLIST":return[Object(f.a)(Object(f.a)({},e.todolist),{},{filter:"all",entityStatus:"idle"})].concat(Object(j.a)(t));case"TODOLISTS/CHANGE-TODOLIST-TITLE":return t.map((function(t){return t.id===e.todolistId?Object(f.a)(Object(f.a)({},t),{},{title:e.title}):t}));case"TODOLISTS/CHANGE-TODOLIST-FILTER":return t.map((function(t){return t.id===e.todolistId?Object(f.a)(Object(f.a)({},t),{},{filter:e.filter}):t}));case"TODOLISTS/SET-TODOLISTS":return e.todolists.map((function(t){return Object(f.a)(Object(f.a)({},t),{},{filter:"all",entityStatus:"idle"})}));case"TODOLISTS/CHANGE-TODOLIST-ENTITY-STATUS":return t.map((function(t){return t.id===e.todolistId?Object(f.a)(Object(f.a)({},t),{},{entityStatus:e.entityStatus}):t}));case"TODOLISTS/WIPE-TODOLISTS-DATA":return[];default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"APP/CHANGE-COLOR-THEME":return Object(f.a)(Object(f.a)({},t),{},{colorTheme:"light"===e.colorTheme?"dark":"light"});case"APP/SET-STATUS":return Object(f.a)(Object(f.a)({},t),{},{status:e.status});case"APP/SET-ERROR":return Object(f.a)(Object(f.a)({},t),{},{error:e.error});case"APP/SET-INITIALIZED":return Object(f.a)(Object(f.a)({},t),{},{isInitialized:e.value});default:return t}},auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,e=arguments.length>1?arguments[1]:void 0;return"LOGIN/SET-IS-LOGGED-IN"===e.type?Object(f.a)(Object(f.a)({},t),{},{isLoggedIn:e.value}):t}}),V=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.c,q=Object(l.d)(F,V(Object(l.a)(_.a)));window.store=q;n(157);var W=d.c,Z=d.b,Y=n(14),B=n(218),J=n(232),X=n(211),$=n(2),Q=Object(a.memo)((function(t){var e=t.addItem,n=t.disabled;console.log("AddItemForm called");var c=Object(a.useState)(""),i=Object(Y.a)(c,2),o=i[0],r=i[1],s=Object(a.useState)(null),d=Object(Y.a)(s,2),l=d[0],u=d[1],O=function(){if(""===o.trim())return u("Title is required"),void r("");e(o.trim()),r("")};return Object($.jsxs)("div",{children:[Object($.jsx)(B.a,{variant:"outlined",size:"small",label:"Title",value:o,onChange:function(t){r(t.currentTarget.value),l&&u("")},onKeyDown:function(t){"Enter"===t.key&&O()},error:!!l,helperText:l,disabled:n}),Object($.jsx)(J.a,{onClick:O,color:"primary",disabled:n,children:Object($.jsx)(X.a,{})})]})})),tt=Object(a.memo)((function(t){console.log("EditableSpan called");var e=Object(a.useState)(!1),n=Object(Y.a)(e,2),c=n[0],i=n[1],o=Object(a.useState)(t.value),r=Object(Y.a)(o,2),s=r[0],d=r[1],l=function(){i(!1),""!==s.trim()&&t.onChange(s)};return c&&!t.disabled?Object($.jsx)(B.a,{value:s,onChange:function(t){d(t.currentTarget.value)},onBlur:l,onKeyDown:function(t){"Enter"===t.key&&l()},autoFocus:!0}):Object($.jsx)("span",{onDoubleClick:function(){i(!0)},children:t.value})})),et=n(222),nt=n(220),at=n(212),ct=Object(a.memo)((function(t){var e=t.task,n=t.todolistId,c=t.disabled,i=Z(),r="loading"===e.entityStatus,d=Object(a.useCallback)((function(t){i(z(n,e.id,{title:t}))}),[i,n,e.id]);return Object($.jsxs)(et.a,{disableGutters:!0,divider:!0,className:e.status===o.Completed?"task isDone":"task",children:[Object($.jsx)(nt.a,{checked:e.status===o.Completed,onChange:function(t){var a=t.currentTarget.checked?o.Completed:o.New;i(z(n,e.id,{status:a}))},color:"primary",size:"small",disabled:r}),Object($.jsx)(J.a,{onClick:function(){i(function(t,e){return function(n){n(R("loading")),n(M(t,e,"loading")),A({todolistId:t,taskId:e}).then((function(a){a.data.resultCode===s.successfully?(n(function(t,e){return{type:"TASKS/REMOVE-TASK",todolistId:t,taskId:e}}(t,e)),n(R("succeeded"))):L(a.data,n)})).catch((function(t){k(t,n)}))}}(n,e.id))},color:"secondary",size:"small",disabled:r,children:Object($.jsx)(at.a,{fontSize:"small"})}),Object($.jsx)(tt,{value:e.title,onChange:d,disabled:c||r})]})})),it=n(231),ot=n(225),rt=Object(a.memo)((function(t){var e=t.todolist;t.demo;console.log("Todolist called");var n=W((function(t){return t.tasks[e.id]})),c=Z(),i="loading"===e.entityStatus;switch(e.filter){case"active":n=n.filter((function(t){return t.status===o.New}));break;case"completed":n=n.filter((function(t){return t.status===o.Completed}))}var r=Object(a.useCallback)((function(t){return function(){return c({type:"TODOLISTS/CHANGE-TODOLIST-FILTER",todolistId:e.id,filter:t})}}),[c,e.id]),d=Object(a.useCallback)((function(t){c(function(t,e){return function(n){n(R("loading")),E({todolistId:t,taskTitle:e}).then((function(e){e.data.resultCode===s.successfully?(n(function(t,e){return{type:"TASKS/ADD-TASK",todolistId:t,task:e}}(t,e.data.data.item)),n(R("succeeded"))):L(e.data,n)})).catch((function(t){k(t,n)}))}}(e.id,t))}),[c,e.id]),l=Object(a.useCallback)((function(t){var n,a;c((n=e.id,a=t,function(t){t(R("loading")),t(w(n,"loading")),v({todolistId:n,title:a}).then((function(e){e.data.resultCode===s.successfully?(t(function(t,e){return{type:"TODOLISTS/CHANGE-TODOLIST-TITLE",todolistId:t,title:e}}(n,a)),t(R("succeeded")),t(w(n,"idle"))):(L(e.data,t),t(w(n,"failed")))})).catch((function(e){k(e,t)}))}))}),[c,e.id]),u=n&&n.length?n.map((function(t){return Object($.jsx)(ct,{task:t,todolistId:e.id,disabled:i},t.id)})):Object($.jsx)("span",{children:"No tasks in this list"});return Object($.jsxs)("div",{children:[Object($.jsxs)("h3",{children:[Object($.jsx)(tt,{value:e.title,onChange:l,disabled:i}),Object($.jsx)(J.a,{onClick:function(){var t;c((t=e.id,function(e){e(R("loading")),e(w(t,"loading")),g(t).then((function(n){n.data.resultCode===s.successfully?(e(function(t){return{type:"TODOLISTS/REMOVE-TODOLIST",id:t}}(t)),e(R("succeeded"))):L(n.data,e)})).catch((function(t){k(t,e)}))}))},color:"secondary",disabled:i,children:Object($.jsx)(at.a,{})})]}),Object($.jsx)(Q,{addItem:d,disabled:i}),Object($.jsx)(it.a,{children:u}),Object($.jsxs)("div",{children:[Object($.jsx)(ot.a,{size:"small",variant:"contained",color:"all"===e.filter?"secondary":"primary",onClick:r("all"),children:"All"}),Object($.jsx)(ot.a,{size:"small",variant:"contained",color:"active"===e.filter?"secondary":"primary",onClick:r("active"),children:"Active"}),Object($.jsx)(ot.a,{size:"small",variant:"contained",color:"completed"===e.filter?"secondary":"primary",onClick:r("completed"),children:"Completed"})]})]})})),st=n(226),dt=n(230),lt=n(15),ut=function(t){var e=t.demo,n=void 0!==e&&e,c=W((function(t){return t.todolists})),i=W((function(t){return t.auth.isLoggedIn})),o=Z();Object(a.useEffect)((function(){!n&&i&&o((function(t){t(R("loading")),p().then((function(e){return t({type:"TODOLISTS/SET-TODOLISTS",todolists:e.data}),t(R("succeeded")),e.data})).then((function(e){e.forEach((function(e){return t(U(e.id))}))})).catch((function(e){k(e,t)}))}))}),[o,n,i]);var r=Object(a.useCallback)((function(t){var e;o((e=t,function(t){t(R("loading")),x(e).then((function(e){e.data.resultCode===s.successfully?(t({type:"TODOLISTS/ADD-TODOLIST",todolist:e.data.data.item}),t(R("succeeded"))):L(e.data,t)})).catch((function(e){k(e,t)}))}))}),[o]),d=c.map((function(t){return Object($.jsx)(st.a,{item:!0,children:Object($.jsx)(dt.a,{elevation:3,style:{padding:"20px"},children:Object($.jsx)(rt,{todolist:t,demo:n},t.id)})},t.id)}));return i?Object($.jsxs)($.Fragment,{children:[Object($.jsx)(st.a,{container:!0,style:{padding:"20px 0 20px 20px"},children:Object($.jsx)(Q,{addItem:r})}),Object($.jsx)(st.a,{container:!0,spacing:3,children:d})]}):Object($.jsx)(lt.a,{to:"/login"})},Ot=n(111),jt=n(236),bt=n(228),ft=n(214),Tt=n(237),ht=n(238),St=n(235),mt=n(239),It=n(227),pt=n(215),xt=n(216),gt=n(217),vt=n(223),yt=n(221),Et=a.forwardRef((function(t,e){return Object($.jsx)(yt.a,Object(f.a)({elevation:6,ref:e,variant:"filled"},t))})),At=function(){var t=W((function(t){return t.app.error})),e=Z(),n=function(t,n){"clickaway"!==n&&e(G(null))};return Object($.jsx)(vt.a,{open:!!t,autoHideDuration:3e3,onClose:n,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:Object($.jsx)(Et,{onClose:n,severity:"error",sx:{width:"100%"},children:t})})},Dt=n(229),kt=n(234),Lt=n(233),Ct=n(209),wt=n(110),Pt=function(){var t=Z(),e=W((function(t){return t.auth.isLoggedIn})),n=Object(wt.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(t){var e={};return t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email="Invalid email address"):e.email="Email required",t.password?t.password.length<8&&(e.password="Password must be 8 characters or more"):e.password="Password required",e},onSubmit:function(e){var a;t((a=e,function(t){t(R("loading")),S(a).then((function(e){e.data.resultCode===s.successfully?(t(N(!0)),t(R("succeeded"))):L(e.data,t)})).catch((function(e){k(e,t)}))})),n.resetForm()}});return e?Object($.jsx)(lt.a,{to:"/todolist-ts"}):Object($.jsx)(st.a,{container:!0,justifyContent:"center",children:Object($.jsx)(st.a,{item:!0,justifyContent:"center",children:Object($.jsxs)(Dt.a,{children:[Object($.jsxs)(Ct.a,{style:{color:"inherit"},children:[Object($.jsxs)("p",{children:["To log in get registered",Object($.jsx)("a",{href:"https://social-network.samuraijs.com/",target:"_blank",rel:"noreferrer",children:" here"})]}),Object($.jsx)("p",{children:"or use common test account credentials:"}),Object($.jsx)("p",{children:"Email: free@samuraijs.com"}),Object($.jsx)("p",{children:"Password: free"})]}),Object($.jsx)("form",{onSubmit:n.handleSubmit,children:Object($.jsxs)(Lt.a,{children:[Object($.jsx)(B.a,Object(f.a)({label:"Email",margin:"normal"},n.getFieldProps("email"))),n.touched.email&&n.errors.email&&Object($.jsx)("div",{style:{color:"red"},children:n.errors.email}),Object($.jsx)(B.a,Object(f.a)({type:"password",label:"Password",margin:"normal"},n.getFieldProps("password"))),n.touched.password&&n.errors.password&&Object($.jsx)("div",{style:{color:"red"},children:n.errors.password}),Object($.jsx)(kt.a,{label:"Remember me",control:Object($.jsx)(nt.a,Object(f.a)({checked:n.values.rememberMe},n.getFieldProps("rememberMe")))}),Object($.jsx)(ot.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})]})})]})})})};var Nt=function(t){var e=t.demo,n=void 0!==e&&e,c=Z(),i=W((function(t){return t.app.isInitialized})),o=W((function(t){return t.auth.isLoggedIn}));Object(a.useEffect)((function(){c((function(t){m().then((function(e){e.data.resultCode===s.successfully?t(N(!0)):L(e.data,t)})).catch((function(e){k(e,t)})).finally((function(){t({type:"APP/SET-INITIALIZED",value:!0})}))}))}),[c]);var r=W((function(t){return t.app})),d=Object(Ot.a)({palette:{mode:r.colorTheme,primary:{main:"#27a1c6"},secondary:{main:"#ffde7d"}}});return i?Object($.jsxs)("div",{children:[Object($.jsx)(At,{}),Object($.jsxs)(bt.a,{theme:d,children:[Object($.jsx)(ft.a,{}),Object($.jsxs)(Tt.a,{position:"static",children:[Object($.jsxs)(ht.a,{style:{justifyContent:"space-between"},children:[Object($.jsx)(J.a,{edge:"start",color:"inherit","aria-label":"menu",children:Object($.jsx)(pt.a,{})}),Object($.jsx)(St.a,{variant:"h6",children:"Todolists"}),Object($.jsxs)("div",{children:[Object($.jsx)(J.a,{onClick:function(){return c({type:"APP/CHANGE-COLOR-THEME",colorTheme:r.colorTheme})},children:"dark"===r.colorTheme?Object($.jsx)(xt.a,{}):Object($.jsx)(gt.a,{})}),o&&Object($.jsx)(ot.a,{color:"inherit",variant:"outlined",onClick:function(){c((function(t){t(R("loading")),I().then((function(e){e.data.resultCode===s.successfully?(t(N(!1)),t({type:"TODOLISTS/WIPE-TODOLISTS-DATA"}),t(R("succeeded"))):L(e.data,t)})).catch((function(e){k(e,t)}))}))},children:"Log out"})]})]}),"loading"===r.status&&Object($.jsx)(mt.a,{})]}),Object($.jsx)(It.a,{fixed:!0,children:Object($.jsxs)(lt.d,{children:[Object($.jsx)(lt.b,{path:"/todolist-ts",element:Object($.jsx)(ut,{demo:n})}),Object($.jsx)(lt.b,{path:"/login",element:Object($.jsx)(Pt,{})}),Object($.jsx)(lt.b,{path:"/404",element:Object($.jsx)("h1",{style:{textAlign:"center"},children:"404: PAGE NOT FOUND"})}),Object($.jsx)(lt.b,{path:"*",element:Object($.jsx)(lt.a,{to:"/404"})})]})})]})]}):Object($.jsx)("div",{style:{position:"fixed",top:"50%",textAlign:"center",width:"100%"},children:Object($.jsx)(jt.a,{size:100})})},Kt=n(53);i.a.render(Object($.jsx)(Kt.a,{children:Object($.jsx)(d.a,{store:q,children:Object($.jsx)(Nt,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[159,1,2]]]);
//# sourceMappingURL=main.19026a54.chunk.js.map